<article class="p-4">
    <div class="flex flex-shrink-0">
        <div class="flex-shrink-0 group block w-full">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <a href="{{ route('users.show', ['name' => $post->user->name]) }}" class="hover:opacity-80 transition-opacity">
                        <img class="inline-block h-10 w-10 object-cover rounded-full" src="{{ $post->user->profile_image ? $post->user->profile_image : '/images/profile-icon.png' }}" alt="profile-image" />
                    </a>
                    <div class="ml-2">
                        <div class="text-base leading-6 font-medium text-gray-700">
                            <a href="{{ route('users.show', ['name' => $post->user->name]) }}" class="no-underline hover:underline text-inherit">
                                <span>{{ $post->user->name }}</span>
                            </a>
                        </div>
                    </div>
                    <span class="ml-2 mr-1 text-gray-400 text-sm">{{ $post->time_ago }}</span>
                    @if($post->status == 'in_progress')
                        <svg class="h-4 w-4 text-orange-400 fill-current" viewBox="0 0 512 512">
                            <g>
                                <path d="M265.771,394.438c-85.91-108.512,26.687-187.388,36.486-249.025c15.86-99.727-73.055-125.767-73.055-125.767
                                    c10.545,33.123-14.781,82.696-61.696,122.337c-49.639,41.925-85.576,108.769-86.457,171.678c-0.382,4.874-0.647,9.789-0.647,14.764
                                    C80.401,429.811,162.589,512,263.976,512c42.149,0,80.978-14.208,111.966-38.096c0,0,14.216-11.85,20.344-18.227
                                    C396.287,455.677,313.449,451.699,265.771,394.438z"></path>
                                <path d="M408.426,271.894c-14.997-19.987-26.871-38.413-26.09-55.261c0.764-16.848,16.89-49.124,16.89-49.124
                                    c-42.996,1.536-102.865,39.915-111.053,129.462c-8.054,88.151,86.474,140.721,109.508,119.231
                                    C454.478,356.324,426.843,296.455,408.426,271.894z"></path>
                                <path d="M348.74,134.244c15.478,5.597,41.269-9.283,44.175-45.496c2.889-36.22-31.354-70.813-23.068-88.749
                                    c-23.831,14.93-38.512,53.425-29.361,77C349.62,100.573,360.796,121.598,348.74,134.244z"></path>
                            </g>
                        </svg>
                    @elseif($post->status == 'completed')
                        <svg class="h-4 w-4 text-gray-400 fill-current" viewBox="0 0 512 512">
                            <g>
                                <path d="M265.771,394.438c-85.91-108.512,26.687-187.388,36.486-249.025c15.86-99.727-73.055-125.767-73.055-125.767
                                c10.545,33.123-14.781,82.696-61.696,122.337c-49.639,41.925-85.576,108.769-86.457,171.678c-0.382,4.874-0.647,9.789-0.647,14.764
                                C80.401,429.811,162.589,512,263.976,512c42.149,0,80.978-14.208,111.966-38.096c0,0,14.216-11.85,20.344-18.227
                                C396.287,455.677,313.449,451.699,265.771,394.438z"></path>
                                <path d="M408.426,271.894c-14.997-19.987-26.871-38.413-26.09-55.261c0.764-16.848,16.89-49.124,16.89-49.124
                                c-42.996,1.536-102.865,39.915-111.053,129.462c-8.054,88.151,86.474,140.721,109.508,119.231
                                C454.478,356.324,426.843,296.455,408.426,271.894z"></path>
                                <path d="M348.74,134.244c15.478,5.597,41.269-9.283,44.175-45.496c2.889-36.22-31.354-70.813-23.068-88.749
                                c-23.831,14.93-38.512,53.425-29.361,77C349.62,100.573,360.796,121.598,348.74,134.244z"></path>
                            </g>
                        </svg>
                    @endif
                </div>
                <div>
                @if( Auth::id() === $post->user_id )
                    <dropdown-menu>
                        <a href="{{ route('posts.edit', $post) }}" class="flex items-center block px-4 py-2 text-sm text-gray-500 font-semibold hover:bg-gray-100">
                            <svg class="h-4 w-4 ml-0.5 -mr-0.5 -mt-0.5" viewBox="0 0 512 512">
                                <g>
                                    <path fill="currentColor" d="M422.002,6.017C315.33,20.736,213.205,220.861,162.939,313.486c-12.641,23.297,9.422,35.406,22.422,13.125
                                        c9.344-16.016,32.109-62.5,44.422-60.094c58.797,9.797,90.156-28.547,67.891-52.672c74.797,1.531,111.875-39.609,90.656-64.609
                                        c22.313,7.063,55.078,6.031,83.766-9.609C533.33,106.22,529.627-8.827,422.002,6.017z"></path>
                                    <path fill="currentColor" d="M409.189,207.048c-9.719,9.141-27.031,22.141-41.547,27.813v207.062c-0.016,4.609-1.781,8.531-4.781,11.563
                                        c-3.031,3-6.953,4.766-11.547,4.781H65.361c-4.594-0.016-8.531-1.781-11.563-4.781c-3-3.031-4.766-6.953-4.781-11.563V155.986
                                        c0.016-4.594,1.781-8.531,4.781-11.563c3.031-3,6.969-4.766,11.563-4.781h160.391c11.234-17.125,22.734-33.578,34.484-49.016
                                        H65.361c-17.969-0.016-34.469,7.344-46.219,19.141c-11.781,11.75-19.156,28.25-19.141,46.219v285.937
                                        c-0.016,17.969,7.359,34.469,19.141,46.234c11.75,11.781,28.25,19.156,46.219,19.141h285.953
                                        c17.953,0.016,34.453-7.359,46.219-19.141c11.781-11.766,19.156-28.266,19.141-46.234V206.017
                                        C416.674,206.017,414.002,202.517,409.189,207.048z"></path>
                                </g>
                            </svg>
                            <span class="ml-3">編集</span>
                        </a>
                        <form method="post" action="{{ route('posts.destroy', $post) }}" id="delete_post" class="flex items-center block px-4 py-2 text-sm text-red-500 font-semibold hover:bg-gray-100">
                            @method('DELETE')
                            @csrf
                            <svg class="h-4 w-4" viewBox="0 0 512 512">
                                <g>
                                    <path fill="currentColor" d="M88.594,464.731C90.958,491.486,113.368,512,140.234,512h231.523c26.858,0,49.276-20.514,51.641-47.269
                                        l25.642-335.928H62.952L88.594,464.731z M420.847,154.93l-23.474,307.496c-1.182,13.37-12.195,23.448-25.616,23.448H140.234
                                        c-13.42,0-24.434-10.078-25.591-23.132L91.145,154.93H420.847z"></path>
                                    <path fill="currentColor" d="M182.954,435.339c5.877-0.349,10.35-5.4,9.992-11.269l-10.137-202.234c-0.358-5.876-5.401-10.349-11.278-9.992
                                        c-5.877,0.357-10.35,5.409-9.993,11.277l10.137,202.234C172.033,431.231,177.085,435.696,182.954,435.339z"></path>
                                    <path fill="currentColor" d="M256,435.364c5.885,0,10.656-4.763,10.656-10.648V222.474c0-5.885-4.771-10.648-10.656-10.648
                                        c-5.885,0-10.657,4.763-10.657,10.648v202.242C245.344,430.601,250.115,435.364,256,435.364z"></path>
                                    <path fill="currentColor" d="M329.046,435.339c5.878,0.357,10.921-4.108,11.278-9.984l10.129-202.234c0.348-5.868-4.116-10.92-9.993-11.277
                                        c-5.877-0.357-10.92,4.116-11.277,9.992L319.054,424.07C318.697,429.938,323.17,434.99,329.046,435.339z"></path>
                                    <path fill="currentColor" d="M439.115,64.517c0,0-34.078-5.664-43.34-8.479c-8.301-2.526-80.795-13.566-80.795-13.566l-2.722-19.297
                                        C310.388,9.857,299.484,0,286.642,0h-30.651H225.34c-12.825,0-23.728,9.857-25.616,23.175l-2.721,19.297
                                        c0,0-72.469,11.039-80.778,13.566c-9.261,2.815-43.357,8.479-43.357,8.479C62.544,67.365,55.332,77.172,55.332,88.38v21.926h200.66
                                        h200.676V88.38C456.668,77.172,449.456,67.365,439.115,64.517z M276.318,38.824h-40.636c-3.606,0-6.532-2.925-6.532-6.532
                                        s2.926-6.532,6.532-6.532h40.636c3.606,0,6.532,2.925,6.532,6.532S279.924,38.824,276.318,38.824z"></path>
                                </g>
                            </svg>
                            <button type="submit" class="ml-3" onclick="return confirm('この投稿を削除してもよろしいですか？');">削除</button>
                        </form>
                    </dropdown-menu>
                @endif
                </div>
            </div>
        </div>
    </div>
    <div class="mt-4 break-words">
        <div class="flex-shrink">
            <a href="{{ route('posts.show', $post) }}">
                <p class="container font-semibold">{{ $post->title }}</p>
                @if($post->image)
                    <img src="{{ $post->image }}" class="w-full h-auto rounded mt-1" />
                @endif
                @if($post->body)
                    <p class="mt-1">{!! nl2br(e($post->body)) !!}</p>
                @endif
            </a>
        </div>
        <div class="flex items-center w-10 h-10 text-gray-400 mt-2 -mb-2">
            <post-good
                :initial-is-gooded-by='@json($post->isGoodedBy(Auth::user()))'
                :initial-count-goods='@json($post->count_goods)'
                :authorized='@json(Auth::check())'
                endpoint="{{ route('posts.good', ['post' => $post]) }}"
            >
            </post-good>
        </div>
    </div>
</article>
